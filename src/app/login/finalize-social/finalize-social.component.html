
<div class="narrow mx-auto">
    <h3 class="mt-3 px-3 py-2 text-muted bg-light light-weight">Complete Registration</h3>
    <form (ngSubmit)="onSubmit()" [formGroup]="finalizeForm" class="p-3">
        <div class="form-group row"
            [class.has-success]="forms.isValid(finalizeForm, 'username')"
            [class.has-danger]="forms.isInvalid(finalizeForm, 'username')">
            <label class="col-sm-2 col-form-label" for="finalizeUsername">Username</label>
            <div class="col-sm-10">
                <input class="form-control" id="finalizeUsername"
                      type="text" placeholder="Username" formControlName="username"
                      [class.form-control-danger]="forms.isInvalid(finalizeForm, 'username')"
                      [class.form-control-success]="forms.isValid(finalizeForm, 'username')">
            </div>
            <div class="col-sm-10 offset-sm-2 form-control-feedback"
                *ngIf="forms.hasError(finalizeForm, 'username', ['required', 'minlength', 'maxlength'])">Please choose a username between 3 and 32 characters.</div>
            <div class="col-sm-10 offset-sm-2 form-control-feedback"
                *ngIf="forms.hasError(finalizeForm, 'username', ['userUnique'])">This username is already taken.</div>
        </div>
        <div class="row mb-3">
            <cmm-recaptcha class="col-sm-10 offset-sm-2"
                          siteKey="6LcvUh4UAAAAABYHX8ukRRfY3aOwieSerjR5HcGT"
                          (verify)="recaptchaVerify($event)">
            </cmm-recaptcha>
        </div>
        <div class="row">
            <div class="col-sm-10 offset-sm-2">
                <button class="btn btn-primary" type="submit" [disabled]="!finalizeForm.valid">Register</button>
                <button class="btn btn-secondary" (click)="cancel()">Cancel</button>
            </div>
        </div>
    </form>
</div>
